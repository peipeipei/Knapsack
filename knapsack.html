<!DOCTYPE html>
<html>
<body>
    
<head>
    <link rel="stylesheet" type="text/css" href="knapsack.css">   
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    
    <script src="http://d3js.org/d3.v3.min.js"></script>
    
    
    <script>
        
        
    var maxWeight = 20;
    var w = 500;
    var h = 600;
    var height = 100;
    var history = [];
        
    function scatter(d3){
            //Create SVG element
            var svg = d3.select(".chart")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);
            svg.selectAll("circle")
                .data(history)
                .enter()
                .append("circle")
                .attr("cx", function(d) {
                    return d[0]*17;
                })
                .attr("cy", function(d) {
                    return d[1]/3.5   ;
                })
                .attr("r", 4);
            svg.selectAll("text")
                .data(history)
                .enter()
                .append("text")
                .text(function(d) {
                    return d[0] + "kg , $" + d[1];
                })
                .attr("x", function(d) {
                    return d[0]*17;
                })
                .attr("y", function(d) {
                    return d[1]/3.5;
                })
                .attr("font-family", "sans-serif")
                .attr("font-size", "12px")
                .attr("fill", "blue");
          
    }    
        
    $(document).ready(function(){   

        //makes captions for each image
        $(".images").each(function(){
            var value = $(this).children('img').data("value") 
            var weight = $(this).children('img').data("weight")
            $(this).children($('.caption')).html("$" + value + ", " + weight + "kg");
        })
        
        
        
        var value = 0;
        var weight = 0;
        
        $(".images").click(function(){
            
            var name = $(this).children('img').data("name"); 
            var location = $(this).parent().get(0).id;
            
            thisWeight = $(this).children('img').data("weight");
            tempWeight = weight + thisWeight
            thisValue = $(this).children('img').data("value")
            
            if (location == "house"){
                //weight += $(this).children('img').data("weight");
                if (tempWeight <= maxWeight){
                    $(this).appendTo("#knapsack");
                    weight = tempWeight;
                    value += thisValue;
                }
                else{
                    //TODO: Add tasteful alert: still doesn't work
                    $('.alerts').append( ' <div class="alert alert-warning alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times; </button> <strong>Warning!</strong> Backpack is too heavy! </div> ');
                }
            }
            if (location == "knapsack"){
                $(this).appendTo("#house");
                weight -= thisWeight;
                value -= thisValue;
            }
            
            $('#value').html(value);
            $('#weight').html(weight);
            
             history.push([weight, value]);
            
            scatter(d3);
            
        })
        
        
    })
    
    
    </script>
    
    
</head>



<div class="main">
    
    <div class="alerts">
    </div>
    
    <div class="minor">
        <div class="top" id="houseTop">
            </br>
            <img src="college.jpg" data-name="college">
        </div>
        
        <div class="inner" id="house">
        
            <figure class="images"><img src="iphone.jpg" data-value="100" data-weight="1" data-name="iphone" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            <figure class="images"><img src="beats.jpg" data-value="125" data-weight="3" data-name="beats" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            <figure class="images"><img src="dslr.jpg" data-value="600" data-weight="15" data-name="dslr" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            <figure class="images"><img src="dvd.jpg" data-value="125" data-weight="5" data-name="dvd" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            <figure class="images"><img src="macColor.jpg" data-value="300" data-weight="13" data-name="macColor" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            <figure class="images"><img src="iMac.jpg" data-value="1000" data-weight="25" data-name="iMac" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            <figure class="images"><img src="macbook.jpg" data-value="600" data-weight="4" data-name="macbook" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            <figure class="images"><img src="walkman.jpg" data-value="200" data-weight="7" data-name="walkman" class="stolen-item"><figcaption class="caption"></figcaption></figure>
            
            
        </div>
    
        <div  class="instruct">Click item to move to knapsack</div >
    
    </div>
    
    <div class="minor">
        <div class="top" id="knaptop">
            <img src="backpack.jpg" data-name="backpack">
            <text>($</text> 
            <text class="info" id="value" data-value="0"></text>
            <text>, </text>
            <text class="info" id="weight" data-weight="0"></text>
            <text>kg)</text>
        </div>
        
        <div class="inner" id="knapsack">
            
        </div>
        
        <div class="instruct">Click item to move to house</div >
    
    </div>

    <div class="minor">
        <div class="top"></div>
        <div class="inner" id="d3s">
            <svg class="chart" id="d3chart"></svg>
        </div>
        
    </div>

</div>

    
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    
    
</body>
</html>






